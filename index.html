<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>📋 Formulario MOVES III - Versión Debug</title>
    
    <style>
        :root {
            --primary-color: #667eea;
            --secondary-color: #764ba2;
            --success-color: #28a745;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
            --debug-color: #ff6b35;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 { font-size: 2.8em; margin-bottom: 10px; font-weight: 700; }
        .header p { font-size: 1.2em; opacity: 0.95; margin-bottom: 20px; }

        .form-content { padding: 40px; }

        .debug-panel {
            background: linear-gradient(145deg, #fff3cd, #ffeaa7);
            border: 2px solid var(--debug-color);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            color: #856404;
        }

        .debug-info {
            font-family: 'Courier New', monospace;
            font-size: 12px;
            background: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            max-height: 300px;
            overflow-y: auto;
            white-space: pre-wrap;
        }

        .section {
            margin-bottom: 30px;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 25px;
            background: #ffffff;
        }

        .section-title {
            font-size: 1.6em;
            color: #1e3c72;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 3px solid var(--primary-color);
        }

        .form-group { margin-bottom: 20px; }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        .required { color: var(--danger-color); }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .debug-highlight {
            border: 3px solid var(--debug-color) !important;
            background: #fff8f0 !important;
        }

        .radio-group {
            display: flex;
            gap: 15px;
            margin-top: 10px;
            flex-wrap: wrap;
        }

        .radio-option {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            cursor: pointer;
            background: white;
            transition: all 0.3s ease;
        }

        .radio-option:hover {
            border-color: var(--primary-color);
            background: #f8f9ff;
        }

        .radio-option input[type="radio"] { width: auto; margin: 0; }

        .submit-btn {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 20px;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }

        .submit-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        #submitFrame { display: none; }

        .help-text {
            font-size: 0.9em;
            color: #666;
            margin-top: 5px;
            font-style: italic;
        }

        .debug-button {
            background: var(--debug-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            margin: 5px;
            cursor: pointer;
            font-size: 0.9em;
        }

        .debug-button:hover {
            background: #e55a2b;
        }

        @media (max-width: 768px) {
            .container { margin: 10px; }
            .form-content { padding: 20px; }
            .radio-group { flex-direction: column; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>📋 Formulario MOVES III</h1>
            <p>Versión Debug - Solución Municipio y Código Postal</p>
        </div>

        <div class="form-content">
            <!-- PANEL DE DEBUG AVANZADO -->
            <div class="debug-panel">
                <h3>🔧 Panel de Debug Avanzado</h3>
                <p>Monitoreo en tiempo real de municipio y código postal</p>
                <div>
                    <button type="button" class="debug-button" onclick="mostrarEstadoFormulario()">📊 Estado Actual</button>
                    <button type="button" class="debug-button" onclick="limpiarDebug()">🧹 Limpiar</button>
                    <button type="button" class="debug-button" onclick="simularEnvio()">🧪 Simular Envío</button>
                </div>
                <div id="debugInfo" class="debug-info">🔍 Debug iniciado - Versión 4.2-FIXED\n</div>
            </div>

            <!-- FORMULARIO OPTIMIZADO -->
            <form id="movesForm" 
                  action="https://script.google.com/macros/s/AKfycbxu5ezLMbLqd59HdyT79D7aFGeEsa1zqQFDEj1q1B7vTLNUBpRA40MHYmF_aq64uHlwAg/exec" 
                  method="POST" 
                  enctype="multipart/form-data" 
                  target="submitFrame">
                
                <!-- Campos ocultos -->
                <input type="hidden" id="formDataJSON" name="data" value="">
                <input type="hidden" name="source" value="html-debug-fixed">
                <input type="hidden" name="version" value="4.2-fixed">
                
                <!-- SECCIÓN: DATOS BÁSICOS -->
                <div class="section">
                    <h2 class="section-title">Datos Básicos del Solicitante</h2>
                    
                    <div class="form-group">
                        <label for="tipoCliente">Tipo de Cliente <span class="required">*</span></label>
                        <select id="tipoCliente" name="tipoCliente" required>
                            <option value="">Seleccionar...</option>
                            <option value="Particular">Particular</option>
                            <option value="Empresa">Empresa</option>
                            <option value="Autónomo">Autónomo</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="nombreCliente">Nombre / Razón Social <span class="required">*</span></label>
                        <input type="text" id="nombreCliente" name="nombreCliente" required 
                               placeholder="Ej: Juan Pérez García" 
                               onchange="debugCampo('nombreCliente', this.value)">
                    </div>

                    <div class="form-group">
                        <label for="dniCif">DNI / CIF <span class="required">*</span></label>
                        <input type="text" id="dniCif" name="dniCif" required 
                               placeholder="12345678A" maxlength="9"
                               onchange="debugCampo('dniCif', this.value)">
                    </div>

                    <div class="form-group">
                        <label for="email">Email <span class="required">*</span></label>
                        <input type="email" id="email" name="email" required 
                               placeholder="ejemplo@email.com"
                               onchange="debugCampo('email', this.value)">
                    </div>

                    <div class="form-group">
                        <label for="telefono">Teléfono <span class="required">*</span></label>
                        <input type="tel" id="telefono" name="telefono" required 
                               placeholder="600123456"
                               onchange="debugCampo('telefono', this.value)">
                    </div>

                    <div class="form-group">
                        <label for="direccion">Dirección <span class="required">*</span></label>
                        <textarea id="direccion" name="direccion" required 
                                  placeholder="Calle, número, piso" rows="2"
                                  onchange="debugCampo('direccion', this.value)"></textarea>
                    </div>

                    <!-- 🔥 CAMPOS CRÍTICOS CON DEBUG ESPECIAL -->
                    <div class="form-group">
                        <label for="municipio" style="color: var(--debug-color); font-size: 16px; font-weight: bold;">
                            🔍 MUNICIPIO (Campo Crítico) <span class="required">*</span>
                        </label>
                        <input type="text" 
                               id="municipio" 
                               name="municipio" 
                               required 
                               placeholder="Valladolid" 
                               class="debug-highlight"
                               onchange="debugCampoEspecial('municipio', 'change', this.value)"
                               onblur="debugCampoEspecial('municipio', 'blur', this.value)"
                               oninput="debugCampoEspecial('municipio', 'input', this.value)"
                               onfocus="debugCampoEspecial('municipio', 'focus', this.value)">
                        <div class="help-text" style="color: var(--debug-color); font-weight: bold;">
                            🚨 Campo bajo monitoreo intensivo - Cada cambio se registra
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="codigoPostal" style="color: var(--debug-color); font-size: 16px; font-weight: bold;">
                            🔍 CÓDIGO POSTAL (Campo Crítico) <span class="required">*</span>
                        </label>
                        <input type="text" 
                               id="codigoPostal" 
                               name="codigoPostal" 
                               required 
                               placeholder="47001" 
                               maxlength="5"
                               class="debug-highlight"
                               onchange="debugCampoEspecial('codigoPostal', 'change', this.value)"
                               onblur="debugCampoEspecial('codigoPostal', 'blur', this.value)"
                               oninput="debugCampoEspecial('codigoPostal', 'input', this.value)"
                               onfocus="debugCampoEspecial('codigoPostal', 'focus', this.value)">
                        <div class="help-text" style="color: var(--debug-color); font-weight: bold;">
                            🚨 Campo bajo monitoreo intensivo - Cada cambio se registra
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Discapacidad <span class="required">*</span></label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="discapacidadNo" name="discapacidad" value="No" required checked>
                                <label for="discapacidadNo">No</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="discapacidadSi" name="discapacidad" value="Sí" required>
                                <label for="discapacidadSi">Sí</label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- SECCIÓN: VEHÍCULO (CAMPOS ESENCIALES) -->
                <div class="section">
                    <h2 class="section-title">Datos del Vehículo</h2>
                    
                    <div class="form-group">
                        <label for="tipoAdquisicion">Tipo de Adquisición <span class="required">*</span></label>
                        <select id="tipoAdquisicion" name="tipoAdquisicion" required>
                            <option value="">Seleccionar...</option>
                            <option value="Compra">Compra</option>
                            <option value="Leasing">Leasing</option>
                            <option value="Renting">Renting</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="marcaModelo">Marca y Modelo <span class="required">*</span></label>
                        <input type="text" id="marcaModelo" name="marcaModelo" required placeholder="Tesla Model 3">
                    </div>

                    <div class="form-group">
                        <label for="motorizacion">Motorización <span class="required">*</span></label>
                        <select id="motorizacion" name="motorizacion" required>
                            <option value="">Seleccionar...</option>
                            <option value="Eléctrico">Eléctrico (BEV)</option>
                            <option value="Híbrido enchufable">Híbrido enchufable (PHEV)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="costeVehiculo">Coste del Vehículo <span class="required">*</span></label>
                        <input type="number" id="costeVehiculo" name="costeVehiculo" required placeholder="45000" min="0">
                    </div>

                    <!-- Campos radio simplificados para prueba -->
                    <div class="form-group">
                        <label>Vehículo Demostración <span class="required">*</span></label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="demoNo" name="vehiculoDemostracion" value="No" required checked>
                                <label for="demoNo">No</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="demoSi" name="vehiculoDemostracion" value="Sí" required>
                                <label for="demoSi">Sí</label>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Taxi o VTC <span class="required">*</span></label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="taxiNo" name="taxiVtc" value="No" required checked>
                                <label for="taxiNo">No</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="taxiSi" name="taxiVtc" value="Sí" required>
                                <label for="taxiSi">Sí</label>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Vehículo Seminuevo <span class="required">*</span></label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="seminuevoNo" name="vehiculoSeminuevo" value="No" required checked>
                                <label for="seminuevoNo">No</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="seminuevoSi" name="vehiculoSeminuevo" value="Sí" required>
                                <label for="seminuevoSi">Sí</label>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Otras Ayudas <span class="required">*</span></label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="ayudasNo" name="otrasAyudas" value="No" required checked>
                                <label for="ayudasNo">No</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="ayudasSi" name="otrasAyudas" value="Sí" required>
                                <label for="ayudasSi">Sí</label>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Se Achatarra Vehículo <span class="required">*</span></label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="achatarrraNo" name="seAchatarrra" value="No" required checked>
                                <label for="achatarrraNo">No</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="achatarraSi" name="seAchatarrra" value="Sí" required>
                                <label for="achatarraSi">Sí</label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Campos ocultos para completar estructura -->
                <input type="hidden" name="marcaModeloAchatarrrar" value="">
                <input type="hidden" name="matriculaAchatarrrar" value="">
                <input type="hidden" name="fechaItvAchatarrrar" value="">
                <input type="hidden" name="fechaPagoIvtm" value="">
                <input type="hidden" name="representanteNombre" value="">
                <input type="hidden" name="representanteDni" value="">

                <!-- BOTÓN DE ENVÍO -->
                <button type="submit" class="submit-btn" id="submitBtn">
                    🔍 Enviar Formulario Debug (Sin Archivos)
                </button>
                <div class="help-text" style="text-align: center; margin-top: 10px;">
                    Esta versión omite archivos para concentrarse en el problema de municipio y código postal
                </div>
            </form>

            <iframe name="submitFrame" id="submitFrame"></iframe>
        </div>
    </div>

    <script>
        // ========================================
        // 🔍 SISTEMA DE DEBUG JAVASCRIPT AVANZADO
        // ========================================

        let debugData = {
            municipio: '',
            codigoPostal: '',
            ultimoEvento: '',
            contadorCambios: 0
        };

        function debugLog(mensaje) {
            const debugInfo = document.getElementById('debugInfo');
            const timestamp = new Date().toLocaleTimeString();
            debugInfo.textContent += `[${timestamp}] ${mensaje}\n`;
            debugInfo.scrollTop = debugInfo.scrollHeight;
            console.log(`🔍 DEBUG: ${mensaje}`);
        }

        function debugCampo(campo, valor) {
            debugLog(`${campo}: "${valor}"`);
        }

        function debugCampoEspecial(campo, evento, valor) {
            debugData.contadorCambios++;
            debugData.ultimoEvento = `${campo}-${evento}`;
            
            if (campo === 'municipio') {
                debugData.municipio = valor;
            } else if (campo === 'codigoPostal') {
                debugData.codigoPostal = valor;
            }
            
            debugLog(`🔥 ${campo.toUpperCase()} ${evento}: "${valor}" (length: ${valor.length})`);
            debugLog(`   → Cambios totales: ${debugData.contadorCambios}`);
        }

        function limpiarDebug() {
            document.getElementById('debugInfo').textContent = '🔍 Debug limpiado - Versión 4.2-FIXED\n';
            debugData.contadorCambios = 0;
        }

        function mostrarEstadoFormulario() {
            const municipio = document.getElementById('municipio').value;
            const codigoPostal = document.getElementById('codigoPostal').value;
            const nombreCliente = document.getElementById('nombreCliente').value;
            
            debugLog('📊 ===== ESTADO ACTUAL DEL FORMULARIO =====');
            debugLog(`   🔥 municipio DOM: "${municipio}" (${municipio.length} chars)`);
            debugLog(`   🔥 codigoPostal DOM: "${codigoPostal}" (${codigoPostal.length} chars)`);
            debugLog(`   📋 nombreCliente DOM: "${nombreCliente}"`);
            debugLog(`   📈 debugData.municipio: "${debugData.municipio}"`);
            debugLog(`   📈 debugData.codigoPostal: "${debugData.codigoPostal}"`);
            debugLog(`   🎯 Último evento: ${debugData.ultimoEvento}`);
            debugLog(`   📊 Total cambios: ${debugData.contadorCambios}`);
        }

        function simularEnvio() {
            debugLog('🧪 ===== SIMULACIÓN DE ENVÍO =====');
            
            const municipio = document.getElementById('municipio').value;
            const codigoPostal = document.getElementById('codigoPostal').value;
            
            if (!municipio || !codigoPostal) {
                debugLog('❌ FALTAN DATOS: Por favor llena municipio y código postal');
                return;
            }
            
            const datosSimulados = {
                municipio: municipio,
                codigoPostal: codigoPostal,
                nombreCliente: document.getElementById('nombreCliente').value || 'Test Simulado'
            };
            
            debugLog(`🧪 Datos que se enviarían:`);
            debugLog(`   municipio: "${datosSimulados.municipio}"`);
            debugLog(`   codigoPostal: "${datosSimulados.codigoPostal}"`);
            debugLog(`   nombreCliente: "${datosSimulados.nombreCliente}"`);
            debugLog(`🧪 JSON simulado: ${JSON.stringify(datosSimulados)}`);
        }

        // ========================================
        // 🚀 MANEJO DE ENVÍO DEL FORMULARIO
        // ========================================

        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('movesForm');
            const submitBtn = document.getElementById('submitBtn');

            debugLog('✅ Formulario Debug v4.2-FIXED inicializado');
            debugLog('🎯 Enfoque: Solución problema municipio y código postal');

            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                debugLog('🚀 ===== INICIANDO ENVÍO REAL =====');
                
                if (!form.checkValidity()) {
                    debugLog('❌ Formulario no válido');
                    form.reportValidity();
                    return;
                }

                // Capturar valores directamente del DOM
                const municipioValor = document.getElementById('municipio').value;
                const codigoPostalValor = document.getElementById('codigoPostal').value;
                
                debugLog('📋 CAPTURA DIRECTA DESDE DOM:');
                debugLog(`   municipio: "${municipioValor}" (${municipioValor.length} chars)`);
                debugLog(`   codigoPostal: "${codigoPostalValor}" (${codigoPostalValor.length} chars)`);

                // Verificar que no estén vacíos
                if (!municipioValor || !codigoPostalValor) {
                    debugLog('🚨 ERROR: Municipio o código postal vacíos');
                    alert('🚨 Por favor llena municipio y código postal');
                    return;
                }

                // Preparar objeto de datos
                const formDataObj = {
                    timestamp: new Date().toISOString(),
                    source: 'html-debug-fixed',
                    version: '4.2-fixed',
                    tipoCliente: document.getElementById('tipoCliente').value,
                    nombreCliente: document.getElementById('nombreCliente').value,
                    dniCif: document.getElementById('dniCif').value,
                    email: document.getElementById('email').value,
                    telefono: document.getElementById('telefono').value,
                    direccion: document.getElementById('direccion').value,
                    // 🔥 CAMPOS CRÍTICOS
                    municipio: municipioValor,
                    codigoPostal: codigoPostalValor,
                    discapacidad: document.querySelector('input[name="discapacidad"]:checked').value,
                    tipoAdquisicion: document.getElementById('tipoAdquisicion').value,
                    marcaModelo: document.getElementById('marcaModelo').value,
                    motorizacion: document.getElementById('motorizacion').value,
                    costeVehiculo: document.getElementById('costeVehiculo').value,
                    vehiculoDemostracion: document.querySelector('input[name="vehiculoDemostracion"]:checked').value,
                    taxiVtc: document.querySelector('input[name="taxiVtc"]:checked').value,
                    vehiculoSeminuevo: document.querySelector('input[name="vehiculoSeminuevo"]:checked').value,
                    otrasAyudas: document.querySelector('input[name="otrasAyudas"]:checked').value,
                    seAchatarrra: document.querySelector('input[name="seAchatarrra"]:checked').value,
                    marcaModeloAchatarrrar: '',
                    matriculaAchatarrrar: '',
                    fechaItvAchatarrrar: '',
                    fechaPagoIvtm: '',
                    representanteNombre: '',
                    representanteDni: ''
                };

                debugLog('📋 OBJETO FINAL PREPARADO:');
                debugLog(`   🔥 formDataObj.municipio: "${formDataObj.municipio}"`);
                debugLog(`   🔥 formDataObj.codigoPostal: "${formDataObj.codigoPostal}"`);
                debugLog(`   📋 formDataObj.nombreCliente: "${formDataObj.nombreCliente}"`);

                // Agregar JSON al campo oculto
                document.getElementById('formDataJSON').value = JSON.stringify(formDataObj);
                
                debugLog('📤 JSON FINAL PARA APPS SCRIPT:');
                debugLog(JSON.stringify(formDataObj, null, 2));

                // Configurar callback
                window.submitCallback = function(success, message) {
                    debugLog(`📞 ===== RESPUESTA RECIBIDA =====`);
                    debugLog(`   success: ${success}`);
                    debugLog(`   message: "${message}"`);
                    
                    submitBtn.disabled = false;
                    submitBtn.textContent = '🔍 Enviar Formulario Debug (Sin Archivos)';
                    
                    if (success) {
                        debugLog('✅ ¡FORMULARIO ENVIADO EXITOSAMENTE!');
                        debugLog('🔍 Revisa el Google Sheets en las columnas H (municipio) e I (código postal)');
                        alert('✅ Formulario enviado exitosamente!\n\nRevisa:\n- Google Sheets columnas H e I\n- Logs del Apps Script\n- Panel de debug');
                    } else {
                        debugLog(`❌ Error en envío: ${message}`);
                        alert(`❌ Error: ${message}\n\nRevisa los logs del Apps Script`);
                    }
                };

                // Cambiar estado del botón
                submitBtn.disabled = true;
                submitBtn.textContent = '⏳ Enviando datos...';

                debugLog('🚀 ENVIANDO AL APPS SCRIPT...');
                form.submit();

                // Timeout de seguridad
                setTimeout(() => {
                    if (submitBtn.disabled) {
                        debugLog('⏰ Timeout de seguridad activado (15s)');
                        window.submitCallback(true, 'Enviado con timeout - revisar manualmente');
                    }
                }, 15000);
            });

            // Listener para respuestas del iframe
            window.addEventListener('message', function(event) {
                debugLog(`📩 Mensaje iframe recibido: ${JSON.stringify(event.data)}`);
                
                if (event.data && event.data.type === 'formSubmitted') {
                    if (window.submitCallback) {
                        window.submitCallback(event.data.success, event.data.message);
                    }
                }
            });

            // Pre-llenar campos para prueba rápida
            document.getElementById('nombreCliente').value = 'Test Debug Municipio';
            document.getElementById('dniCif').value = '12345678A';
            document.getElementById('email').value = 'test@debug.com';
            document.getElementById('telefono').value = '600123456';
            document.getElementById('direccion').value = 'Calle Test Debug';
            document.getElementById('municipio').value = 'Valladolid';
            document.getElementById('codigoPostal').value = '47001';
            document.getElementById('tipoAdquisicion').value = 'Compra';
            document.getElementById('marcaModelo').value = 'Tesla Model 3 Debug';
            document.getElementById('motorizacion').value = 'Eléctrico';
            document.getElementById('costeVehiculo').value = '45000';

            debugLog('🎯 Formulario pre-llenado para prueba rápida');
            debugLog('📋 Usa "📊 Estado Actual" para ver valores o modifica los campos críticos');
        });
    </script>
</body>
</html>